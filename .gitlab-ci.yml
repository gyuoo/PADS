stages:
  - build
 
build_BE:
  stage: build
  image: gradle:8.8-jdk21
  before_script:
    - echo "[INFO] YML Settings"
    - chmod +x backend/gs-anomaly-detecion-backend/gradlew
  script:
    - cd backend/gs-anomaly-detecion-backend
    - ./gradlew clean build -x test -Dspring.profiles.active=dev
    - ls -al ./build/libs
    - cp ./build/libs/s103-0.0.1-SNAPSHOT.jar /home/ubuntu/s103/backend/mock/
    - mv /home/ubuntu/s103/backend/mock/s103-0.0.1-SNAPSHOT.jar /home/ubuntu/s103/backend/mock/gs-pads-mock-0.0.1-SNAPSHOT.jar
    - sh /home/ubuntu/s103/backend/mock/gs-mock-backend.sh
  rules:
    - if: '$CI_COMMIT_BRANCH == "develop"'
  tags: 
    - dev
 
# build_FE:
#   stage: build
#   image: node
#   before_script:
#     - echo "[INFO] YML Settings"
#     - cd frontend/melting
#     - printenv | grep 'VITE_' > .env
#   script:
#     - yarn install
#     - yarn build
#     - sudo cp -R dist ~/melting/melting-fe
#     - sh ~/melting/melting-fe/react.sh
#   rules:
#     - if: '$CI_COMMIT_BRANCH == "dev-fe"'
#   tags: 
#     - prod